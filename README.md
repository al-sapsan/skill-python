# Расширенные возможности в Python

___
___

## Задача 1. Подготовка

Откройте [данный файл](https://colab.research.google.com/drive/1kI6RbQptTmFDZEVTllAFZyJV30XM-KdM?usp=drive_link) в Jupiter Notebook и выполните предложенную практическую работу. Данная практика — подготовительный этап. Она содержит подсказки для самопроверки и не требует сдачи куратору на проверку. Однако, если у вас возникнут трудности с выполнением, вы можете задать вопросы через форму сдачи практической работы.
___

## Задача 2

Напишите функцию-генератор, которая возвращает очередной элемент, содержащий числа Фибоначчи в количестве, переданном в функцию. Если число не передано, то мы возвращаем бесконечную последовательность. Ограничьте искусственно вывод 100 элементов.

```python
def get_fib_numbers(qty): 
    pass  

fib_numbers = list(get_fib_numbers(10)) 
assert len(fib_numbers) == 10 
print(fib_numbers)  

[0, 1, 1, 2, 3, 5, 8, 13, 21, 34] 
 ```

___

## Задача 3

Напишите функции-генераторы, которые выводят элементы разложения `sin`, `cos` и `exp` в ряды Тейлора. После, используя функциональный подход, найдите сумму членов ряда и сравните её со значением вычисления функции из модуля math. Выведите разницу в экспоненциальном представлении.

Входные данные

```bash
Введите значение угла в радианах: 1
Введите количество элементов ряда: 5
```

Вывод программы

```python
math.sin(x) − sin(x) = -2.5e-8
math.cos(x) − cos(x) = -2.7e-7
math.exp(x) − exp(x) = 9.9e-3
```

### Рекомендации

Запишите k-ый и (k-1)-ый члены разложения. Найдите множитель, на который они отличаются, чтобы использовать его в функции-генераторе.
Для вывода числа в экспоненциальной форме вспомните тему «Форматирование строк».
___

## Задача 4

Реализуйте преобразование координат точки на плоскости из декартовой системы координат в полярную. Точка в декартовой системе координат задаётся двумя вещественными числами `x` и `y`, которые означают величины проекций точки на оси.

Координаты в полярной системе координат:

- полярный радиус — расстояние от начала системы координат;
- полярный угол — угол, отсчитываемый против часовой стрелки от луча, выходящего из начала системы координат.
Преобразование из декартовых координат в полярные выглядит следующим образом:

<img width="298" alt="coordinates_transform" src="https://github.com/user-attachments/assets/eb1b86d0-1276-4b10-9a48-cf7db523108d" />

Изображение: Михаил Свинцов

При таком преобразовании полярный угол будет находиться в промежутке ‌[-π, π].

### Входные данные 

```bash
Введите декартовы координаты в виде x;y: 10;-33
```

### Вывод программы 

```bash
Полярный радиус: radius=34.482
Полярный угол: phi=-1.277
```

___

## Задача 5

Вам дан список молекул и их атомная масса:

```bash
H (водород) — 1.008
O (кислород) — 15.999;
S (сера) — 32.066;
Na (натрий) — 22.990;
Cl (хлор) — 35.453;
K (калий) — 39.098. 
```

Посчитайте молярную массу молекул, используя методы функционального программирования. Выведите значения в порядке возрастания молярной массы.

### Входные данные 

```bash
['H2-S-O4', 'H2-O', 'NA-CL', 'H-CL', 'K-CL']
```

### Вывод программы 

```bash
H2-O       18.015
H-CL       36.461
NA-CL      58.443
K-CL       74.551
H2-S-O4    98.078
```

### Рекомендации

- Входные данные можно сразу реализовать в виде списка в коде программы.
- Атомные массы удобно хранить в виде словаря.

___

## Задача 6

Расширим возможности калькулятора, который вы делали в первом модуле, и модифицируем логику обработки выражений. Теперь будем собирать возникающие исключения с помощью системы логирования.

Калькулятор должен поддерживать четыре операции: сложение (+), умножение (×), вычитание (−), деление (÷), определённые с целыми числами и числами с плавающей точкой, а также должен быть толерантен к пробелам, то есть между операндами и числами может быть неограниченное число пробелов.

Для обработки выражений реализуйте функциональный подход: создайте функцию для каждой операции и используйте её как объект.

### Как работает калькулятор

Вы указываете имя файла, содержащего выражения, которые нужно вычислить. Одно выражение — одна строка. Если в выражении есть ошибки, калькулятор запоминает номера строк, в которых они встретились, и выводит ошибки в консоль и файл. Калькулятору также необходимо вывести номер строки с результатами вычисления и результат вычисления. В файл `logs.log` необходимо вывести лог ошибок, в котором также записать номер строки, в котором встретилась ошибка, и её тип.

### Входные данные 

```bash
exprs.txt
2 + 3
-2 -3
-5,2   * 4
-5.2 *4
a+ 5
```

### Вывод программы 

```python
results.txt
1 5.0
2 -5.0
4 -20.8
logs.log
2023-08-12 14:08:12.806 | ERROR    | __main__:<module>:69 - Line #3: could not convert string to float: '-5,2'
2023-08-12 14:08:12.806 | ERROR    | __main__:<module>:69 - Line #5: Пустая строка
2023-08-12 14:08:12.806 | ERROR    | __main__:<module>:69 - Line #6: could not convert string to float: 'a'
```

### Рекомендации

- Для логирования можно использовать пакеты loguru или logging.
- Обратите внимание на обработку отрицательных чисел: разделение строки по сепаратору «-» может привести к неожиданным результатам.

___

## Задача 7

### Реализуйте «Шифр Цезаря»

- вводим с клавиатуры размер смещения, оно может быть отрицательным и положительным;
- вводим с клавиатуры текст сообщения;
- на экран выводится шифрованное сообщение и результат расшифровки.

### Входные данные 

```bash
Введите смещение: 31
Введите сообщение: Привет, мир!
```

### Вывод программы 

```python
Шифрованное сообщение: Ножагр, кжо!
Расшифрованное сообщение: Привет, мир!
```

### Входные данные 

```bash
Введите смещение: 9
Введите сообщение: Как дела, Петя?
```

### Вывод программы 

```bash
Шифрованное сообщение: Уиу мнфи, Шныз?
Расшифрованное сообщение: Как дела, Петя?
```

___

## Задача 8

Дан [файл системы контроля спорткомплекса](https://drive.google.com/file/d/1dnjxkoP4PtimuD2SEAFAiztcHDyOYR7r/view). Вам нужно:

- Прочитать файл (поля в файле разделены символом табуляции «\t»).
- Вычислить время, проведённое спортсменом в бассейне (разница между временем входа и выхода из бассейна).
- Рассчитать время, проведённое в комплексе (время между входом и выходом в комплекс).
- Вывести в отдельный файл с логами в случае, если данные о выходе спортсмена отсутствуют, а также в случае обнаружения ошибок или неточностей в записях (отсутствие времени входа, выхода, противоречия в записях).

### Вывод программы 

```python
Атлет 10011 провёл в Pool-2: 225 мин.
Атлет 10013 провёл в Center: 195 мин.
Атлет 10011 провёл в Pool-2: 175 мин.
Атлет 10017 провёл в Pool-2: 152 мин.

logs.log
2023-08-12 20:05:34.082 | DEBUG    | __main__:<module>:24 - Не зафиксировано время входа атлета 10001 в Pool-1
2023-08-12 20:05:34.082 | DEBUG    | __main__:<module>:24 - Не зафиксировано время входа атлета 10001 в Pool-1
2023-08-12 20:05:34.083 | DEBUG    | __main__:<module>:14 - Не зафиксировано время выхода атлета 10019 из Pool-2
2023-08-12 20:05:34.083 | DEBUG    | __main__:<module>:24 - Не зафиксировано время входа атлета 10018 в Pool-1
2023-08-12 20:05:34.083 | DEBUG    | __main__:<module>:24 - Не зафиксировано время входа атлета 10020 в Pool-2
2023-08-12 20:05:34.083 | DEBUG    | __main__:<module>:26 - Не зафиксировано время выхода атлета 10019 из Pool-2
2023-08-12 20:05:34.083 | DEBUG    | __main__:<module>:26 - Не зафиксировано время выхода атлета 10011 из Pool-1
2023-08-12 20:05:34.083 | DEBUG    | __main__:<module>:26 - Не зафиксировано время выхода атлета 10011 из Center
2023-08-12 20:05:34.083 | DEBUG    | __main__:<module>:26 - Не зафиксировано время выхода атлета 10017 из Center
```

___

## Задача 9 (по желанию)

Реализуйте вычисление контрольной суммы для каждой буквы сообщения:

- На вход передаётся некоторое сообщение.
- Вы разбиваете его на символы, вычисляете crc8 для каждого символа, выводите символ и его контрольную сумму в виде 0 и 1, то есть в бинарной форме.
- Создаёте декодер для получения сообщения, проверки контрольной суммы для каждого символа.
- В случае обнаружения проблем с контрольной суммой выводите на консоль и в файл ошибку. Также передаёте тело сообщения и контрольную сумму.

### Входные данные 

```bash
Введите тип (1 — кодер и декодер, 2 — декодер): 1
Введите сообщение: hello
```

### Вывод программы 

```bash
Кодированное сообщение: 01101000 00011111 01100101 00111100 01101100 00000011 01101100 00000011 01101111 00001010
Декодированное сообщение: hello
```

### Входные данные 

```bash
Введите тип (1 — кодер и декодер, 2 — декодер): 2
Введите кодированное сообщение: 01101000 00011111 01100101 00111100 01101100 00000011 01101100 00000011 01101111 00001010
```

### Вывод программы 

```bash
Все контрольные суммы верны.
Декодированное сообщение: hello
```

### Входные данные 

```bash
Введите тип (1 — кодер и декодер, 2 — декодер): 2
```

### Вывод программы 

```bash
Введите кодированное сообщение: 01101000 00111111 01100101 00111100 01101100 00000011 01101100 00000011 01101111 00001010
Ошибка в символе h с индексом 1.
Символ: h
crc8: 1f
crc8 (полученное): 3f
Декодированное сообщение: hello
```

### Используйте

- [библиотеку CRC8](https://pypi.org/project/crc8/).
- [циклический избыточный код](https://ru.m.wikipedia.org/wiki/Циклический_избыточный_код).

___

## Советы и рекомендации

- для выполнения практической работы установите Jupyter Notebook [инструкция по установке](https://www.reg.ru/blog/sreda-razrabotki-jupyter-notebook/)
- дополнительные модули `numpy`, `scipy`, `click` [инструкция по установке модулей](https://github.com/Em2see/python_articles/blob/main/guides/pip_usage.md).

## Материалы

[Конспект](https://docs.google.com/document/d/1bJkvwyAnzES22C76gYr5ZQNqyUDvB06vSt4jwpp9MZw/edit?tab=t.0#heading=h.rehqv581kvmz)
___
___

# Модуль пройден

- Все задания выполнены.
- Созданный код приложен к настоящей ветке репозитория.
